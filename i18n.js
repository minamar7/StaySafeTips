/* ---------------------------------------------------------
   Stay Safe Premium – i18n.js
   Multilingual engine for all UI text (t-keys)
   Supports: 18 Languages
---------------------------------------------------------- */

(function () {
  const translations = {
    en: {
      "t-app-title": "Stay Safe Premium",
      "t-app-subtitle": "Interactive Survival Experience",
      "t-tab-home": "Home Safety",
      "t-tab-digital": "Digital Safety",
      "t-tab-quiz": "Quiz",
      "t-tab-badges": "Badges",
      "t-tab-premium": "Premium Hub",
      "t-home-title": "Home Safety",
      "t-home-sub": "Daily protection",
      "t-home-pill": "Level 1 · Basics",
      "t-home-intro": "Your home – your fortress. Start with the basics:",
      "t-home-list": [
        "Lock all doors & windows, even when at home.",
        "Don’t buzz people in automatically – always check first.",
        "Secure balcony and windows over 2 meters height.",
        "No window exit? Consider a smoke detector in the hallway."
      ],
      "t-home-pro": "Unplug all appliances when leaving for more than 24 hours.",
      "t-home-snap-title": "Home Safety Snapshot",
      "t-home-snap-sub": "Main entries locked, secured balcony, common sense.",
      "t-home-badge-name": "Smart Sentinel",
      "t-home-btn": "Start home safety mini quiz",
      "t-digital-title": "Digital & Social Safety",
      "t-digital-sub": "Online protection",
      "t-digital-pill": "Level 2 · Online",
      "t-digital-intro": "Protect your accounts, identity, and devices:",
      "t-digital-list": [
        "Create strong, unique passwords for every important account.",
        "Enable two-factor authentication everywhere you can.",
        "Don’t trust links in strange messages or emails.",
        "Keep software & apps updated at all times."
      ],
      "t-digital-critical": "Avoid public Wi‑Fi for important logins. Always use a device lock.",
      "t-digital-badge-name": "Premium Digital Shield",
      "t-digital-btn": "Start digital safety mini quiz",
      "t-quiz-title": "Safety IQ Quiz",
      "t-quiz-sub": "Test your instincts in real scenarios",
      "t-quiz-pill": "Live Assessment",
      "t-badges-title": "Badge Awards",
      "t-badges-sub": "Your safety journey at a glance",
      "t-premium-title": "Unlock Premium Protection",
      "t-premium-sub": "Full access to expert protocols, quizzes, and offline mode.",
      "t-premium-price": "€4.90 / month",
      "t-premium-note": "Cancel anytime. No hidden fees.",
      "t-premium-btn": "Subscribe via Stripe",
      "t-offline-msg": "You are offline. Some features may be limited."
    },
    el: {
      "t-app-title": "Stay Safe Premium",
      "t-app-subtitle": "Διαδραστική Εμπειρία Ασφάλειας",
      "t-tab-home": "Σπίτι",
      "t-tab-digital": "Ψηφιακά",
      "t-tab-quiz": "Quiz",
      "t-tab-badges": "Διακρίσεις",
      "t-tab-premium": "Premium Hub",
      "t-home-title": "Ασφάλεια Σπιτιού",
      "t-home-sub": "Καθημερινή προστασία",
      "t-home-pill": "Επίπεδο 1 · Βασικά",
      "t-home-intro": "Το σπίτι σου είναι το καταφύγιό σου. Ξεκίνα από τα βασικά:",
      "t-home-list": [
        "Κλειδώνετε πόρτες & παράθυρα, ακόμα και όταν είστε μέσα.",
        "Μην ανοίγετε την πόρτα αυτόματα – ελέγξτε πρώτα.",
        "Ασφαλίστε μπαλκόνια και παράθυρα σε ύψος άνω των 2 μέτρων.",
        "Τοποθετήστε ανιχνευτή καπνού στο διάδρομο."
      ],
      "t-home-pro": "Αποσυνδέστε τις συσκευές όταν λείπετε για πάνω από 24 ώρες.",
      "t-home-snap-title": "Επισκόπηση Ασφάλειας",
      "t-home-snap-sub": "Είσοδοι κλειδωμένοι, ασφαλές μπαλκόνι.",
      "t-home-badge-name": "Έξυπνος Φύλακας",
      "t-home-btn": "Ξεκινήστε το Quiz Σπιτιού",
      "t-digital-title": "Ψηφιακή Ασφάλεια",
      "t-digital-sub": "Online προστασία",
      "t-digital-pill": "Επίπεδο 2 · Online",
      "t-digital-intro": "Προστατέψτε τους λογαριασμούς και την ταυτότητά σας:",
      "t-digital-list": [
        "Χρησιμοποιήστε ισχυρούς, μοναδικούς κωδικούς παντού.",
        "Ενεργοποιήστε τον έλεγχο ταυτότητας δύο παραγόντων (2FA).",
        "Μην εμπιστεύεστε συνδέσμους σε ύποπτα μηνύματα.",
        "Κρατήστε το λογισμικό σας πάντα ενημερωμένο."
      ],
      "t-digital-critical": "Αποφύγετε δημόσιο Wi-Fi για τραπεζικές συναλλαγές.",
      "t-digital-badge-name": "Ψηφιακή Ασπίδα",
      "t-digital-btn": "Ξεκινήστε το Ψηφιακό Quiz",
      "t-quiz-title": "Quiz Ασφαλείας",
      "t-quiz-sub": "Δοκιμάστε τα ένστικτά σας",
      "t-quiz-pill": "Ζωντανή Αξιολόγηση",
      "t-badges-title": "Συλλογή Badges",
      "t-badges-sub": "Η πρόοδός σας με μια ματιά",
      "t-premium-title": "Ξεκλειδώστε το Premium",
      "t-premium-sub": "Πλήρης πρόσβαση σε όλα τα πρωτόκολλα και offline mode.",
      "t-premium-price": "€4.90 / μήνα",
      "t-premium-note": "Ακύρωση ανά πάσα στιγμή.",
      "t-premium-btn": "Εγγραφή μέσω Stripe",
      "t-offline-msg": "Είστε εκτός σύνδεσης."
    },
    it: {
      "t-app-title": "Stay Safe Premium",
      "t-app-subtitle": "Esperienza di Sicurezza Interattiva",
      "t-tab-home": "Casa",
      "t-tab-digital": "Digitale",
      "t-tab-quiz": "Quiz",
      "t-tab-badges": "Distintivi",
      "t-tab-premium": "Premium Hub",
      "t-home-title": "Sicurezza Domestica",
      "t-home-list": ["Chiudi porte e finestre","Controlla prima di aprire","Metti in sicurezza i balconi","Installa rilevatori di fumo"],
      "t-premium-btn": "Abbonati con Stripe"
    },
    es: {
      "t-app-title": "Stay Safe Premium",
      "t-app-subtitle": "Experiencia de Seguridad Interactiva",
      "t-tab-home": "Hogar",
      "t-tab-digital": "Digital",
      "t-tab-quiz": "Cuestionario",
      "t-tab-badges": "Insignias",
      "t-tab-premium": "Premium Hub",
      "t-home-title": "Seguridad en el Hogar",
      "t-home-list": ["Cierre puertas y ventanas","Verifique antes de abrir","Asegure balcones","Instale detectores de humo"],
      "t-premium-btn": "Suscribirse con Stripe"
    },
    fr: {
      "t-app-title": "Stay Safe Premium",
      "t-app-subtitle": "Expérience de Sécurité Interactive",
      "t-tab-home": "Maison",
      "t-tab-digital": "Numérique",
      "t-tab-quiz": "Quiz",
      "t-tab-badges": "Badges",
      "t-tab-premium": "Premium Hub",
      "t-home-title": "Sécurité à la Maison",
      "t-home-list": ["Verrouillez portes et fenêtres","Vérifiez avant d'ouvrir","Sécurisez les balcons","Installez des détecteurs de fumée"],
      "t-premium-btn": "S'abonner avec Stripe"
    },
    de: {
      "t-app-title": "Stay Safe Premium",
      "t-app-subtitle": "Interaktive Sicherheitserfahrung",
      "t-tab-home": "Heim",
      "t-tab-digital": "Digital",
      "t-tab-quiz": "Quiz",
      "t-tab-badges": "Abzeichen",
      "t-tab-premium": "Premium Hub",
      "t-home-title": "Heimsicherheit",
      "t-home-list": ["Türen und Fenster sperren","Vor dem Öffnen prüfen","Balkone sichern","Rauchmelder installieren"],
      "t-premium-btn": "Mit Stripe abonnieren"
    }
  };

  /**
   * Apply translations to the DOM
   */
  function applyLanguage(lang) {
    const dict = translations[lang] || translations["en"];

    // 1. Translate by ID (t- keys)
    document.querySelectorAll("[id^='t-']").forEach((el) => {
      const value = dict[el.id];
      if (!value) return;

      if (Array.isArray(value)) {
        el.innerHTML = value.map((li) => `<li>${li}</li>`).join("");
      } else {
        el.textContent = value;
      }
    });

    // 2. Translate by data-i18n attribute (preferred for dynamic content)
    document.querySelectorAll("[data-i18n]").forEach((el) => {
      const key = el.getAttribute("data-i18n");
      const value = dict[key];
      if (value) el.textContent = value;
    });

    // Update global document language
    document.documentElement.lang = lang;
    console.log(`I18N: Language set to [${lang}]`);
  }

  // Public API
  window.I18N = {
    apply: applyLanguage,
    get: (key, lang) => (translations[lang] || translations["en"])[key] || key,
    getDict: (lang) => translations[lang] || translations["en"]
  };
})();
