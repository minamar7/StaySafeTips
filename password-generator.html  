<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Password Generator â€“ Stay Safe Premium</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="./styles.css" />

  <style>
    .pw-box {
      margin-top: 10px;
      padding: 12px 14px;
      border-radius: 12px;
      border: 1px solid #1f2937;
      background: #020617;
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-family: monospace;
      font-size: 0.9rem;
      color: #e5e7eb;
    }
    .pw-meta {
      font-size: 0.85rem;
      color: #9ca3af;
      margin-top: 6px;
    }
    .pw-options {
      margin-top: 12px;
      font-size: 0.85rem;
      color: #d1d5db;
    }
    .pw-options label {
      display: block;
      margin-bottom: 4px;
    }
    .pw-length {
      margin-top: 10px;
      font-size: 0.85rem;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .pw-length button {
      width: auto;
      padding: 4px 10px;
      margin-top: 0;
    }
    #pw-gen-btn {
      margin-top: 14px;
      width: 100%;
      padding: 14px;
      border-radius: 12px;
      background: linear-gradient(90deg, #facc15, #eab308);
      color: #000;
      font-weight: 600;
      border: none;
    }
  </style>
</head>

<body>
  <div class="app-shell">

    <header class="app-header">
      <div>
        <h1>ðŸ”‘ Password Generator</h1>
        <p class="sub">Create ultraâ€‘secure passwords instantly</p>
      </div>
    </header>

    <main class="app-screen active">

      <div class="pw-box">
        <span id="pw-output">â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢</span>
        <button id="pw-copy-btn" style="width:auto;padding:6px 10px;font-size:0.75rem;">
          COPY
        </button>
      </div>

      <p class="pw-meta" id="pw-strength-label">Strength: Unknown</p>

      <div class="pw-length">
        <span>Length: <strong id="pw-length-value">16</strong></span>
        <div>
          <button id="pw-dec-btn">âˆ’</button>
          <button id="pw-inc-btn">+</button>
        </div>
      </div>

      <div class="pw-options">
        <label><input type="checkbox" id="opt-upper" checked /> Uppercase (Aâ€‘Z)</label>
        <label><input type="checkbox" id="opt-lower" checked /> Lowercase (aâ€‘z)</label>
        <label><input type="checkbox" id="opt-num" checked /> Numbers (0â€‘9)</label>
        <label><input type="checkbox" id="opt-sym" checked /> Symbols (!@#$%&)</label>
      </div>

      <button id="pw-gen-btn">Generate New Password</button>

    </main>
  </div>

  <script>
    // Premium gate
    (function () {
      const isPremium = localStorage.getItem("premium") === "true";
      if (!isPremium) {
        window.location.href = "index.html#premium";
        return;
      }
    })();

    const output = document.getElementById("pw-output");
    const copyBtn = document.getElementById("pw-copy-btn");
    const genBtn = document.getElementById("pw-gen-btn");
    const lenVal = document.getElementById("pw-length-value");
    const decBtn = document.getElementById("pw-dec-btn");
    const incBtn = document.getElementById("pw-inc-btn");
    const strengthLabel = document.getElementById("pw-strength-label");

    const optUpper = document.getElementById("opt-upper");
    const optLower = document.getElementById("opt-lower");
    const optNum = document.getElementById("opt-num");
    const optSym = document.getElementById("opt-sym");

    function generatePassword() {
      let length = parseInt(lenVal.textContent, 10);
      let chars = "";
      if (optUpper.checked) chars += "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
      if (optLower.checked) chars += "abcdefghijklmnopqrstuvwxyz";
      if (optNum.checked) chars += "0123456789";
      if (optSym.checked) chars += "!@#$%&";

      if (!chars) {
        alert("Select at least one character type.");
        return;
      }

      let pw = "";
      for (let i = 0; i < length; i++) {
        pw += chars.charAt(Math.floor(Math.random() * chars.length));
      }
      output.textContent = pw;
      updateStrength(pw);
    }

    function updateStrength(pw) {
      let score = 0;
      if (pw.length >= 12) score++;
      if (/[A-Z]/.test(pw) && /[a-z]/.test(pw)) score++;
      if (/\d/.test(pw)) score++;
      if (/[!@#$%&]/.test(pw)) score++;

      let label = "Weak";
      if (score === 2) label = "Medium";
      if (score === 3) label = "Strong";
      if (score === 4) label = "Ultra";

      strengthLabel.textContent = "Strength: " + label;
    }

    genBtn.addEventListener("click", generatePassword);

    copyBtn.addEventListener("click", () => {
      const pw = output.textContent;
      navigator.clipboard.writeText(pw).then(() => {
        copyBtn.textContent = "COPIED";
        setTimeout(() => (copyBtn.textContent = "COPY"), 1000);
      });
    });

    decBtn.addEventListener("click", () => {
      let length = parseInt(lenVal.textContent, 10);
      if (length > 8) lenVal.textContent = length - 1;
    });

    incBtn.addEventListener("click", () => {
      let length = parseInt(lenVal.textContent, 10);
      if (length < 32) lenVal.textContent = length + 1;
    });

    // initial
    generatePassword();
  </script>

</body>
</html>