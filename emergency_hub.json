async function openDojo() {
    if(!isPremium) { nav('premium'); return; }
    try {
        const res = await fetch('./dojo.json');
        const data = await res.json();
        let html = `<div class="glass-card" style="text-align:left; max-height:80vh; overflow-y:auto; padding:15px;">
            <h2 style="color:var(--accent); margin:0 0 5px 0; font-size:26px;">${data.title}</h2>
            <small style="color:var(--gold); font-weight:bold; letter-spacing:1px;">${data.master_rank}</small>
            <hr style="opacity:0.1; margin:15px 0;">`;

        data.techniques.forEach(t => {
            html += `
            <div style="display:flex; align-items:flex-start; gap:15px; margin-bottom:25px; background:rgba(255,255,255,0.02); padding:15px; border-radius:20px; border:1px solid rgba(255,255,255,0.05);">
                <div style="flex: 0 0 100px;">
                    <img src="${t.image}" style="width:100px; height:120px; object-fit:contain; border-radius:12px; filter: drop-shadow(0 0 5px var(--accent));" onerror="this.src='https://via.placeholder.com/100x120?text=ğŸ¥‹'">
                </div>
                <div style="flex: 1;">
                    <h4 style="margin:0 0 8px 0; color:var(--accent); font-size:16px;">${t.emoji} ${t.name}</h4>
                    <p style="font-size:13px; line-height:1.5; color:var(--text); margin:0;">${t.description}</p>
                </div>
            </div>`;
        });

        html += `<button class="main-cta" onclick="nav('home')">Î•Î Î™Î£Î¤Î¡ÎŸÎ¦Î—</button></div>`;
        document.getElementById('screen_quiz').innerHTML = html;
        nav('quiz');
    } catch(e) { alert("Î£Ï†Î¬Î»Î¼Î± Ï†ÏŒÏÏ„Ï‰ÏƒÎ·Ï‚ Dojo"); }
}

// Î‘Î½Î±Î²Î±Î¸Î¼Î¹ÏƒÎ¼Î­Î½Î¿ SOS Î¼Îµ Î¼ÎµÎ³Î¬Î»Î± Î³ÏÎ¬Î¼Î¼Î±Ï„Î±
async function openSOS() {
    if(!isPremium) { nav('premium'); return; }
    try {
        const res = await fetch('./emergency_hub.json');
        const data = await res.json();
        let html = `<div class="glass-card" style="text-align:left; max-height:80vh; overflow-y:auto;">
            <h1 style="color:var(--danger); font-size:32px; margin-bottom:10px;">ğŸŒ Global SOS Hub</h1>
            <p style="font-size:18px; font-weight:bold; color:var(--gold);">Universal: ${data.global_standard.number}</p>
            <hr style="opacity:0.1; margin:20px 0;">`;
        
        data.regions.forEach(r => {
            html += `<h2 style="color:var(--accent); font-size:24px;">${r.area}</h2>`;
            r.countries.forEach(c => {
                html += `<div style="background:rgba(239,68,68,0.05); padding:12px; border-radius:15px; margin-bottom:10px; border-left:4px solid var(--danger);">
                    <strong style="font-size:16px;">${c.name}</strong><br>
                    <span style="font-size:18px; letter-spacing:1px;">ğŸš“ ${c.police} | ğŸš‘ ${c.medical}</span>
                </div>`;
            });
        });
        html += `<button class="main-cta" style="margin-top:20px;" onclick="nav('home')">Î•Î Î™Î£Î¤Î¡ÎŸÎ¦Î—</button></div>`;
        document.getElementById('screen_quiz').innerHTML = html;
        nav('quiz');
    } catch(e) { alert("Î£Ï†Î¬Î»Î¼Î± SOS"); }
}
