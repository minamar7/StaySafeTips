<!DOCTYPE html>
<html lang="el">
<head>
<meta charset="UTF-8">
<title>Stay Safe Elite</title>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
<meta name="theme-color" content="#020617">
<meta name="apple-mobile-web-app-capable" content="yes">

<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-XXXXXXXXXXXXXXXX" crossorigin="anonymous"></script>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

<style>
:root {
  --bg: #020617;
  --card: #0f172a;
  --accent: #38bdf8;
  --gold: #facc15;
  --text: #e5e7eb;
  --muted: #94a3b8;
}

* { box-sizing: border-box; font-family: -apple-system, system-ui, sans-serif; -webkit-tap-highlight-color: transparent; }
body { margin: 0; background: var(--bg); color: var(--text); overflow-x: hidden; }

.hidden { display: none !important; }

/* Onboarding */
.onboarding-screen {
  position: fixed; inset: 0;
  background: radial-gradient(circle at top, #1e293b, #000);
  display: flex; align-items: center; justify-content: center;
  z-index: 9999;
}
.onboarding-content { text-align: center; padding: 30px; }
.onboarding-icon { font-size: 80px; margin-bottom: 20px; filter: drop-shadow(0 0 20px var(--accent)); }

/* App Header */
.app-header { padding: 40px 20px 20px; background: rgba(15, 23, 42, 0.5); backdrop-filter: blur(10px); border-bottom: 1px solid #1e293b; }
.header-top { display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px; }
.user-rank-box { background: #1e293b; border-radius: 20px; padding: 6px 15px; font-size: 14px; color: var(--gold); border: 1px solid rgba(250, 204, 21, 0.3); }

.lang-select { background: #1e293b; color: white; border: 1px solid var(--accent); padding: 5px 10px; border-radius: 10px; font-size: 12px; outline: none; }

.xp-container { margin-top: 10px; }
.xp-bar { background: rgba(255,255,255,0.1); border-radius: 10px; height: 12px; overflow: hidden; }
.xp-fill { background: linear-gradient(90deg, var(--gold), #fbbf24); height: 100%; width: 0%; transition: 0.6s cubic-bezier(0.34, 1.56, 0.64, 1); }

/* Content Area */
.content-area { padding: 20px 20px 100px; }
.glass-card { background: linear-gradient(145deg, #1e293b, #0f172a); border-radius: 24px; padding: 25px; margin-bottom: 20px; border: 1px solid rgba(255,255,255,0.05); box-shadow: 0 10px 30px rgba(0,0,0,0.5); }

.main-cta {
  background: linear-gradient(135deg, var(--accent), #0ea5e9);
  border: none; color: #020617; padding: 18px; border-radius: 18px;
  font-size: 16px; font-weight: 800; width: 100%; cursor: pointer; transition: 0.2s;
}
.main-cta:active { transform: scale(0.96); }

/* Quiz Styles */
.quiz-question-box { background: #1e293b; padding: 25px; border-radius: 20px; margin-bottom: 20px; font-size: 18px; font-weight: 600; text-align: center; min-height: 120px; display: flex; align-items: center; justify-content: center; }
.quiz-options-grid button {
  background: #0f172a; border: 1px solid #334155; color: white;
  padding: 16px; border-radius: 16px; margin-bottom: 12px; width: 100%;
  font-size: 15px; cursor: pointer; transition: 0.2s;
}
#next_btn { margin-top: 10px; background: var(--gold); color: black; display: none; }

/* Badges */
.badges-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; }
.badge { background: #0f172a; padding: 25px; border-radius: 22px; text-align: center; font-size: 35px; border: 2px solid transparent; }
.badge.locked { opacity: 0.2; filter: grayscale(1); }
.badge.unlocked { border-color: var(--gold); box-shadow: 0 0 15px rgba(250, 204, 21, 0.3); }

/* Navigation */
.nav-tabs { position: fixed; bottom: 0; left: 0; right: 0; height: 80px; background: rgba(2, 6, 23, 0.95); backdrop-filter: blur(15px); display: flex; border-top: 1px solid #1e293b; padding-bottom: 15px; }
.nav-tab { flex: 1; background: none; border: none; color: var(--muted); font-size: 24px; cursor: pointer; }
.nav-tab.active { color: var(--accent); }

/* Overlays */
.quiz-result { position: fixed; inset: 0; background: rgba(0,0,0,0.9); display: flex; align-items: center; justify-content: center; z-index: 10000; }
.quiz-result-card { background: #1e293b; padding: 30px; border-radius: 30px; text-align: center; width: 85%; border: 1px solid var(--accent); }

.social-icon { width: 50px; height: 50px; border-radius: 12px; display: flex; align-items: center; justify-content: center; font-size: 24px; text-decoration: none; color: white; }
</style>
</head>

<body>

<section id="onboarding" class="onboarding-screen">
  <div class="onboarding-content">
    <div class="onboarding-icon">ğŸ›¡ï¸</div>
    <h1 style="font-size: 32px;" data-i18n="welcome">Stay Safe Elite</h1>
    <p style="color: var(--muted); margin-bottom: 30px;" data-i18n="upgrade_msg">ÎœÎ¬Î¸Îµ Î½Î± Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏÎµÎ¹Ï‚ Ï„Î¿Î½ ÎµÎ±Ï…Ï„ÏŒ ÏƒÎ¿Ï….</p>
    <button id="btn-start" class="main-cta" data-i18n="start_btn">ÎÎ•ÎšÎ™ÎÎ‘ Î¤ÎŸ Î¤Î‘ÎÎ™Î”Î™</button>
  </div>
</section>

<div id="main_app" class="hidden">
  <header class="app-header">
    <div class="header-top">
      <div class="user-rank-box">ğŸ”¥ <span id="streak">1 Day Streak</span></div>
      <select id="lang_select" class="lang-select" onchange="updateLanguage(this.value)">
        <option value="el">ğŸ‡¬ğŸ‡· GR</option>
        <option value="en">ğŸ‡ºğŸ‡¸ EN</option>
      </select>
    </div>
    <h1 style="font-size: 24px;" data-i18n="safety_dashboard">Dashboard</h1>
    <div class="xp-container">
      <div class="xp-bar"><div id="xp_fill" class="xp-fill"></div></div>
      <div style="display:flex; justify-content:space-between; margin-top:5px;">
          <small style="color:var(--muted)">Progress</small>
          <small style="color:var(--gold)"><span data-i18n="level">Level</span> <span id="level_val">1</span></small>
      </div>
    </div>
  </header>

  <main class="content-area">
    <section id="screen_home" class="screen">
      <div class="glass-card">
        <h2 data-i18n="home_tab">Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î± Î£Ï€Î¹Ï„Î¹Î¿Ï</h2>
        <button class="main-cta" onclick="startQuiz('free')" data-i18n="entry_quiz_btn">ENTRY QUIZ</button>
      </div>

      <div class="glass-card" style="text-align:center;">
        <p style="font-size: 13px; color: var(--muted); margin-bottom: 12px;">Official Security Partner</p>
        <div style="display: flex; justify-content: center; gap: 20px; margin-bottom: 10px;">
          <a href="https://instagram.com/YOUR_FRIEND" target="_blank" class="social-icon" style="background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #bc1888);">ğŸ“¸</a>
          <a href="https://tiktok.com/@YOUR_FRIEND" target="_blank" class="social-icon" style="background: black; border: 1px solid #25f4ee;">ğŸ“±</a>
        </div>
        <p style="font-size: 12px; color: var(--accent);">4K+ Experts Community</p>
      </div>
    </section>

    <section id="screen_quiz" class="screen hidden">
      <div id="question_box" class="quiz-question-box"></div>
      <div id="options_grid" class="quiz-options-grid"></div>
      <button id="next_btn" class="main-cta" onclick="nextQuestion()" data-i18n="continue">Î£Î¥ÎÎ•Î§Î•Î™Î‘</button>
    </section>

    <section id="screen_badges" class="screen hidden">
      <h2 style="margin-bottom:20px;" data-i18n="badges_tab">Î¤ÏÏŒÏ€Î±Î¹Î±</h2>
      <div class="badges-grid">
        <div id="badge_home" class="badge locked">ğŸ </div>
        <div id="badge_digital" class="badge locked">ğŸ›¡ï¸</div>
      </div>
    </section>

    <section id="screen_premium" class="screen hidden">
      <div class="glass-card" style="border: 1px solid var(--gold); text-align:center;">
        <div style="font-size:50px;">ğŸ‘‘</div>
        <h2 data-i18n="premium_tab">Elite Access</h2>
        <button class="main-cta" style="background:var(--gold); color:black;" onclick="openPaywall()" data-i18n="elite_quiz_btn">ELITE QUIZ</button>
      </div>
    </section>
  </main>

  <nav class="nav-tabs">
    <button class="nav-tab active" onclick="nav('home')">ğŸ </button>
    <button class="nav-tab" onclick="nav('badges')">ğŸ…</button>
    <button class="nav-tab" onclick="nav('premium')">ğŸ’</button>
  </nav>
</div>

<div id="ad_screen" class="quiz-result hidden" style="background: white; z-index: 50000;">
    <div style="text-align: center; color: black; width: 100%;">
        <small style="color:#999;">Advertisement</small>
        <div id="ad-placeholder" style="width:300px; height:250px; background:#eee; margin: 20px auto; display:flex; align-items:center; justify-content:center; border:1px dashed #ccc;">
            <p style="color:#666; font-size:12px;">Google Ad Slot</p>
        </div>
        <button id="close_ad_btn" class="main-cta" style="background:black; color:white; width:80%; display:none;" onclick="closeAd()">ÎšÎ›Î•Î™Î£Î™ÎœÎŸ</button>
        <p id="ad_timer_text" style="font-size:12px; color:#666;">ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ ÏƒÎµ 5...</p>
    </div>
</div>

<div id="level_up_modal" class="quiz-result hidden" style="z-index: 40000;">
    <div class="quiz-result-card" style="border: 3px solid var(--gold); transform: scale(0); transition: 0.5s cubic-bezier(0.17, 0.89, 0.32, 1.49);">
        <div style="font-size: 70px;">â­</div>
        <h1 style="color: var(--gold); font-size: 35px;">LEVEL UP!</h1>
        <p>Î¦Ï„Î¬ÏƒÎ±Ï„Îµ ÏƒÏ„Î¿ Î•Ï€Î¯Ï€ÎµÎ´Î¿ <span id="new_lv_val">2</span></p>
        <button class="main-cta" style="background:var(--gold); color:black;" onclick="closeLevelUp()">Î¤Î•Î›Î•Î™Î‘!</button>
    </div>
</div>

<div id="paywall_screen" class="quiz-result hidden">
    <div class="quiz-result-card" style="border-color: var(--gold);">
        <h2 style="color:var(--gold)">Elite Subscription</h2>
        <p>2.99â‚¬ / Î¼Î®Î½Î±</p>
        <button class="main-cta" onclick="alert('Î£ÏÎ½Î´ÎµÏƒÎ· Î¼Îµ Ï€ÏÎ»Î· Ï€Î»Î·ÏÏ‰Î¼ÏÎ½...')">Î‘Î“ÎŸÎ¡Î‘</button>
        <button onclick="closePaywall()" style="background:none; border:none; color:var(--muted); margin-top:15px;">ÎŠÏƒÏ‰Ï‚ Î±ÏÎ³ÏŒÏ„ÎµÏÎ±</button>
    </div>
</div>

<div id="result_screen" class="quiz-result hidden">
  <div class="quiz-result-card">
    <div style="font-size:60px;">ğŸ†</div>
    <h2 data-i18n="congrats">Î£Ï…Î³Ï‡Î±ÏÎ·Ï„Î®ÏÎ¹Î±!</h2>
    <p style="color:var(--gold); font-weight:bold;">Î¤Î­Î»Î¿Ï‚ Ï„Î¿Ï… Î¤ÎµÏƒÏ„</p>
    <button class="main-cta" onclick="closeResult()" data-i18n="continue">Î Î™Î£Î©</button>
  </div>
</div>

<script>
const translations = {
  el: { welcome: "Stay Safe Elite", start_btn: "ÎÎ•ÎšÎ™ÎÎ‘ Î¤ÎŸ Î¤Î‘ÎÎ™Î”Î™", home_tab: "Î‘ÏƒÏ†Î¬Î»ÎµÎ¹Î± Î£Ï€Î¹Ï„Î¹Î¿Ï", badges_tab: "Î¤ÏÏŒÏ€Î±Î¹Î±", premium_tab: "Elite Access", level: "Î•Ï€Î¯Ï€ÎµÎ´Î¿", continue: "Î£Î¥ÎÎ•Î§Î•Î™Î‘", upgrade_msg: "ÎœÎ¬Î¸Îµ Î½Î± Ï€ÏÎ¿ÏƒÏ„Î±Ï„ÎµÏÎµÎ¹Ï‚ Ï„Î¿Î½ ÎµÎ±Ï…Ï„ÏŒ ÏƒÎ¿Ï….", safety_dashboard: "Dashboard", entry_quiz_btn: "ÎÎ•ÎšÎ™ÎÎ‘ Î¤ÎŸ Î¤Î•Î£Î¤", elite_quiz_btn: "ELITE Î¤Î•Î£Î¤", congrats: "Î£Ï…Î³Ï‡Î±ÏÎ·Ï„Î®ÏÎ¹Î±!" },
  en: { welcome: "Stay Safe Elite", start_btn: "START JOURNEY", home_tab: "Home Safety", badges_tab: "Badges", premium_tab: "Elite Access", level: "Level", continue: "CONTINUE", upgrade_msg: "Learn how to protect yourself.", safety_dashboard: "Dashboard", entry_quiz_btn: "ENTRY QUIZ", elite_quiz_btn: "ELITE QUIZ", congrats: "Congratulations!" }
};

let xp = 0, level = 1, current_q = 0, quiz_data = [];
let currentLang = 'el';

document.getElementById('btn-start').onclick = () => {
  document.getElementById('onboarding').classList.add('hidden');
  document.getElementById('main_app').classList.remove('hidden');
};

function nav(id) {
  document.querySelectorAll('.screen').forEach(s => s.classList.add('hidden'));
  document.getElementById('screen_' + id).classList.remove('hidden');
  document.querySelectorAll('.nav-tab').forEach(b => b.classList.remove('active'));
  if (event) event.currentTarget.classList.add('active');
}

async function startQuiz(mode = 'free') {
  try {
    const response = await fetch(`./questions_${mode}_${currentLang}.json`);
    const data = await response.json();
    quiz_data = data.sort(() => Math.random() - 0.5).slice(0, 5);
    current_q = 0; nav('quiz'); showQuestion();
  } catch (err) { alert("Î‘Î½Î­Î²Î±ÏƒÎµ Ï„Î± JSON Î±ÏÏ‡ÎµÎ¯Î± ÏƒÏ„Î¿ GitHub!"); }
}

function showQuestion() {
  const qData = quiz_data[current_q];
  document.getElementById('question_box').innerText = qData.q;
  document.getElementById('next_btn').style.display = 'none';
  document.getElementById('options_grid').innerHTML = qData.o.map((opt, i) => 
    `<button class="opt-btn" onclick="handleAnswer(${i})">${opt}</button>`
  ).join('');
}

function handleAnswer(selectedIdx) {
  const qData = quiz_data[current_q];
  const buttons = document.querySelectorAll('.opt-btn');
  buttons.forEach(btn => btn.disabled = true);
  if (selectedIdx === qData.a) {
    buttons[selectedIdx].style.background = "#22c55e"; 
    xp += 20; updateProgress();
  } else {
    buttons[selectedIdx].style.background = "#ef4444";
    buttons[qData.a].style.background = "#22c55e";
  }
  document.getElementById('next_btn').style.display = 'block';
}

function nextQuestion() {
  current_q++;
  if (current_q < quiz_data.length) { showQuestion(); } 
  else { document.getElementById('result_screen').classList.remove('hidden'); }
}

function updateProgress() {
  const newLevel = Math.floor(xp / 100) + 1;
  document.getElementById('xp_fill').style.width = (xp % 100) + "%";
  document.getElementById('level_val').innerText = newLevel;
  if (newLevel > level) { level = newLevel; triggerLevelUp(newLevel); }
}

function triggerLevelUp(lv) {
  document.getElementById('new_lv_val').innerText = lv;
  const modal = document.getElementById('level_up_modal');
  modal.classList.remove('hidden');
  setTimeout(() => { modal.querySelector('.quiz-result-card').style.transform = "scale(1)"; }, 100);
  confetti({ particleCount: 150, spread: 70, origin: { y: 0.6 }, colors:['#38bdf8', '#facc15'] });
}

function closeLevelUp() {
  document.getElementById('level_up_modal').classList.add('hidden');
  showAd();
}

function showAd() {
  const adScreen = document.getElementById('ad_screen');
  adScreen.classList.remove('hidden');
  let time = 5;
  const timer = setInterval(() => {
    time--;
    document.getElementById('ad_timer_text').innerText = `ÎšÎ»ÎµÎ¯ÏƒÎ¹Î¼Î¿ ÏƒÎµ ${time}...`;
    if(time <= 0) {
      clearInterval(timer);
      document.getElementById('ad_timer_text').style.display = 'none';
      document.getElementById('close_ad_btn').style.display = 'block';
    }
  }, 1000);
}

function closeAd() { document.getElementById('ad_screen').classList.add('hidden'); }
function openPaywall() { document.getElementById('paywall_screen').classList.remove('hidden'); }
function closePaywall() { document.getElementById('paywall_screen').classList.add('hidden'); }
function closeResult() { document.getElementById('result_screen').classList.add('hidden'); nav('home'); }
</script>
</body>
</html>
