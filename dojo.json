<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Elite Defense Dojo - Premium</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
    <style>
        :root { 
            --gold: #facc15; 
            --neon-blue: #38bdf8;
            --bg: #020617; 
            --card-light: #e2e8f0;
            --muted: #94a3b8;
        }
        body { 
            margin: 0; background: var(--bg); color: white; 
            font-family: -apple-system, sans-serif; padding: 20px;
            overflow-x: hidden;
        }

        /* Mockup Outer Frame */
        .dojo-container {
            border: 2px solid var(--neon-blue);
            border-radius: 40px;
            padding: 30px 15px;
            background: linear-gradient(180deg, rgba(56, 189, 248, 0.08) 0%, transparent 100%);
            box-shadow: 0 0 25px rgba(56, 189, 248, 0.2);
            text-align: center;
            max-width: 420px;
            margin: auto;
            position: relative;
        }

        .kanji { font-size: 3.5rem; color: var(--gold); display: block; margin-bottom: 5px; filter: drop-shadow(0 0 12px var(--gold)); }
        h1 { font-size: 1.4rem; letter-spacing: 2px; margin: 0; text-transform: uppercase; font-weight: 900; }
        .motto { font-size: 0.7rem; color: var(--neon-blue); letter-spacing: 1px; margin-bottom: 25px; font-weight: bold; }

        /* Main Master Visual */
        .main-visual {
            border: 3px solid var(--gold);
            border-radius: 28px;
            overflow: hidden;
            margin-bottom: 25px;
            background: #0f172a;
        }
        .main-visual img { width: 100%; display: block; }
        
        /* Rank Progress */
        .progress-box { padding: 0 10px; margin-bottom: 20px; text-align: left; }
        .progress-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 5px; }
        .progress-label { font-size: 0.65rem; color: var(--gold); font-weight: 800; text-transform: uppercase; }
        .bar-bg { background: rgba(255,255,255,0.1); height: 8px; border-radius: 10px; overflow: hidden; }
        .bar-fill { width: 35%; height: 100%; background: var(--gold); box-shadow: 0 0 10px var(--gold); transition: 1s; }

        /* Premium Lesson List */
        .lesson-list { text-align: left; margin-top: 20px; max-height: 250px; overflow-y: auto; padding-right: 5px; }
        .lesson-item {
            background: rgba(255,255,255,0.05); border: 1px solid rgba(56, 189, 248, 0.2);
            border-radius: 15px; padding: 12px; margin-bottom: 10px;
            display: flex; align-items: center; justify-content: space-between;
            cursor: pointer;
        }
        .lesson-item.locked { opacity: 0.4; filter: grayscale(1); cursor: not-allowed; }
        .lesson-info h4 { margin: 0; font-size: 0.85rem; }
        .lesson-info span { font-size: 0.6rem; color: var(--neon-blue); font-weight: bold; }
        .belt-marker { width: 8px; height: 30px; border-radius: 4px; }

        .enter-btn {
            background: linear-gradient(180deg, var(--gold), #eab308);
            color: black; width: 100%; padding: 18px;
            border-radius: 18px; border: none; font-weight: 900;
            text-transform: uppercase; font-size: 1.1rem; cursor: pointer;
            box-shadow: 0 5px 15px rgba(250, 204, 21, 0.4); margin-top: 20px;
        }

        /* Steps Overlay */
        .steps-overlay {
            display: none; position: fixed; inset: 0;
            background: var(--bg); padding: 25px; z-index: 1000;
            overflow-y: auto;
        }
        .steps-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 20px; }
        .step-card { background: var(--card-light); border-radius: 20px; padding: 15px; border: 2px solid var(--gold); text-align: center; }
        .step-tag { background: #1e293b; color: white; font-size: 0.6rem; padding: 3px 8px; border-radius: 6px; display: inline-block; margin-bottom: 10px; }
        .step-name { color: #0f172a; font-size: 0.7rem; font-weight: 900; text-transform: uppercase; }

        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-thumb { background: var(--gold); border-radius: 10px; }
    </style>
</head>
<body>

    <div class="dojo-container">
        <span class="kanji">ÈÅìÂ†¥</span>
        <h1>Elite Defense Dojo</h1>
        <p class="motto">POWERED BY INSTINCT</p>

        <div class="main-visual">
            <img src="https://img.freepik.com/premium-vector/karate-martial-arts-illustration_23-2148915155.jpg" alt="Master Visualization">
        </div>

        <div class="progress-box">
            <div class="progress-header">
                <span class="progress-label" id="rank-name">WHITE BELT RANK</span>
                <span style="font-size:0.7rem; font-weight:bold;" id="rank-percent">35%</span>
            </div>
            <div class="bar-bg"><div id="bar-fill" class="bar-fill"></div></div>
        </div>

        <div class="lesson-list">
            <div class="lesson-item" onclick="openLesson('Palm Strike (Sudo)', 'WHITE')">
                <div class="lesson-info"><span>WHITE BELT</span><h4>Palm Strike</h4></div>
                <div class="belt-marker" style="background: white;"></div>
            </div>
            <div class="lesson-item" onclick="openLesson('Front Snap Kick', 'WHITE')">
                <div class="lesson-info"><span>WHITE BELT</span><h4>Front Snap Kick</h4></div>
                <div class="belt-marker" style="background: white;"></div>
            </div>
            
            <div id="orange-lesson" class="lesson-item locked" onclick="checkLock('ORANGE')">
                <div class="lesson-info"><span>ORANGE BELT</span><h4>Wrist Grab Escape</h4></div>
                <div class="belt-marker" style="background: orange;"></div>
            </div>

            <div id="green-lesson" class="lesson-item locked" onclick="checkLock('GREEN')">
                <div class="lesson-info"><span>GREEN BELT</span><h4>Elbow Strike</h4></div>
                <div class="belt-marker" style="background: green;"></div>
            </div>
        </div>

        <button class="enter-btn" onclick="startChallenge()">Master Challenge</button>
        <p style="font-size: 0.6rem; color: var(--muted); margin-top: 15px;" onclick="window.location.href='index.html'">BACK TO DASHBOARD</p>
    </div>

    <div id="stepsView" class="steps-overlay">
        <h2 id="view-title" style="color:var(--gold); text-align:center;">TECHNIQUE</h2>
        <div class="steps-grid">
            <div class="step-card"><div class="step-tag">STEP 1</div><div class="step-name">Stance</div></div>
            <div class="step-card"><div class="step-tag">STEP 2</div><div class="step-name">Chamber</div></div>
            <div class="step-card"><div class="step-tag">STEP 3</div><div class="step-name">Impact</div></div>
            <div class="step-card"><div class="step-tag">STEP 4</div><div class="step-name">Kihap</div></div>
        </div>
        <button class="enter-btn" onclick="closeLesson()">Mark as Mastered</button>
    </div>

    <script>
        let lessonsMastered = 0;
        let currentRank = "WHITE";

        function openLesson(name, belt) {
            if (belt !== currentRank && lessonsMastered < 2) return; 
            document.getElementById('view-title').innerText = name;
            document.getElementById('stepsView').style.display = 'block';
        }

        function closeLesson() {
            document.getElementById('stepsView').style.display = 'none';
            lessonsMastered++;
            document.getElementById('bar-fill').style.width = "100%";
            document.getElementById('rank-percent').innerText = "100%";
        }

        function startChallenge() {
            if (lessonsMastered < 2) {
                alert("Complete all White Belt lessons first!");
                return;
            }
            
            let q = "Master Challenge: What is the primary goal of self-defense?\nA) To win\nB) To escape safely\nC) To attack first";
            let ans = prompt(q);
            
            if (ans && ans.toLowerCase().includes('b')) {
                confetti({ particleCount: 150, spread: 70 });
                promoteUser();
            } else {
                alert("Study the philosophy of Tang Soo Do and try again.");
            }
        }

        function promoteUser() {
            currentRank = "ORANGE";
            document.getElementById('rank-name').innerText = "ORANGE BELT RANK";
            document.getElementById('bar-fill').style.width = "10%";
            document.getElementById('rank-percent').innerText = "10%";
            document.getElementById('orange-lesson').classList.remove('locked');
            alert("Congratulations! You have earned your ORANGE BELT! üü†");
        }

        function checkLock(belt) {
            if(document.getElementById(belt.toLowerCase()+'-lesson').classList.contains('locked')) {
                alert("This rank is locked. Pass the Master Challenge to unlock.");
            }
        }
    </script>
</body>
</html>
